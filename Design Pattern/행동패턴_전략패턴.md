# ì „ëµ íŒ¨í„´ Strategy Pattern

ì‹¤í–‰(ëŸ°íƒ€ì„) ì¤‘ì— ì•Œê³ ë¦¬ì¦˜ ì „ëµì„ ì„ íƒí•˜ì—¬ ê°ì²´ ë™ì‘ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°”ë€Œë„ë¡Â í•  ìˆ˜ ìˆê²Œ í•˜ëŠ”Â í–‰ìœ„ ë””ìì¸ íŒ¨í„´

- ì—¬ê¸°ì„œ 'ì „ëµ'ì´ë€ ì¼ì¢…ì˜ ì•Œê³ ë¦¬ì¦˜ì´ ë  ìˆ˜ ë„ ìˆìœ¼ë©°, ê¸°ëŠ¥ì´ë‚˜ ë™ì‘ì´ ë  ìˆ˜ë„ ìˆëŠ” íŠ¹ì •í•œ ëª©í‘œë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ í–‰ë™ ê³„íšì„ ë§í•œë‹¤.
- ì¦‰, ì–´ë–¤ ì¼ì„ ìˆ˜í–‰í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ ì—¬ëŸ¬ê°€ì§€ ì¼ë•Œ, ë™ì‘ë“¤ì„ ë¯¸ë¦¬ ì „ëµìœ¼ë¡œ ì •ì˜í•¨ìœ¼ë¡œì¨ ì†ì‰½ê²Œ ì „ëµì„ êµì²´í•  ìˆ˜ ìˆëŠ”,Â **ì•Œê³ ë¦¬ì¦˜ ë³€í˜•ì´ ë¹ˆë²ˆí•˜ê²Œ í•„ìš”í•œ ê²½ìš°**ì— ì í•©í•œ íŒ¨í„´ì´ë‹¤.

<br/>

## ì „ëµ íŒ¨í„´ êµ¬ì¡°

![image](https://github.com/user-attachments/assets/a832d598-8cde-4195-be86-b15e1dd955af)

- **ì „ëµ ì•Œê³ ë¦¬ì¦˜ ê°ì²´ë“¤**Â : ì•Œê³ ë¦¬ì¦˜, í–‰ìœ„, ë™ì‘ì„ ê°ì²´ë¡œ ì •ì˜í•œ êµ¬í˜„ì²´
- **ì „ëµ ì¸í„°í˜ì´ìŠ¤**Â : ëª¨ë“  ì „ëµ êµ¬í˜„ì œì— ëŒ€í•œ ê³µìš© ì¸í„°í˜ì´ìŠ¤
- **ì»¨í…ìŠ¤íŠ¸(Context)**Â : ì•Œê³ ë¦¬ì¦˜ì„ ì‹¤í–‰í•´ì•¼ í•  ë•Œë§ˆë‹¤ í•´ë‹¹ ì•Œê³ ë¦¬ì¦˜ê³¼ ì—°ê²°ëœ ì „ëµ ê°ì²´ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œ.
- **í´ë¼ì´ì–¸íŠ¸**Â : íŠ¹ì • ì „ëµ ê°ì²´ë¥¼ ì»¨í…ìŠ¤íŠ¸ì— ì „ë‹¬ í•¨ìœ¼ë¡œì¨ ì „ëµì„ ë“±ë¡í•˜ê±°ë‚˜ ë³€ê²½í•˜ì—¬ ì „ëµ ì•Œê³ ë¦¬ì¦˜ì„ ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ ëˆ„ë¦°ë‹¤.

<br/>

## ì „ëµ íŒ¨í„´ êµ¬í˜„

### í–‰ìœ„ ì¶”ìƒí™”

```java
// ì „ëµ(ì¶”ìƒí™”ëœ ì•Œê³ ë¦¬ì¦˜)
interface IStrategy {
    void doSomething();
}

// ì „ëµ ì•Œê³ ë¦¬ì¦˜ A
class ConcreteStrateyA implements IStrategy {
    public void doSomething() {}
}

// ì „ëµ ì•Œê³ ë¦¬ì¦˜ B
class ConcreteStrateyB implements IStrategy {
    public void doSomething() {}
}
```

### ì»¨í…ìŠ¤íŠ¸ ë“±ë¡

```java
// ì»¨í…ìŠ¤íŠ¸(ì „ëµ ë“±ë¡/ì‹¤í–‰)
class Context {
    IStrategy Strategy; // ì „ëµ ì¸í„°í˜ì´ìŠ¤ë¥¼ í•©ì„±(composition)
	
    // ì „ëµ êµì²´ ë©”ì†Œë“œ
    void setStrategy(IStrategy Strategy) {
        this.Strategy = Strategy;
    }
	
    // ì „ëµ ì‹¤í–‰ ë©”ì†Œë“œ
    void doSomething() {
        this.Strategy.doSomething();
    }
}
```

### í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰

```java
// í´ë¼ì´ì–¸íŠ¸(ì „ëµ êµì²´/ì „ëµ ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ ì–»ìŒ)
class Client {
    public static void main(String[] args) {
        // 1. ì»¨í…ìŠ¤íŠ¸ ìƒì„±
        Context c = new Context();

        // 2. ì „ëµ ì„¤ì •
        c.setStrategy(new ConcreteStrateyA());

        // 3. ì „ëµ ì‹¤í–‰
        c.doSomething();

        // 4. ë‹¤ë¥¸ ì „ëµ ì„¤ì •
        c.setStrategy(new ConcreteStrateyB());

        // 5. ë‹¤ë¥¸ ì „ëµ ì‹œí–‰
        c.doSomething();
    }
}
```

<br/>

## ì „ëµ íŒ¨í„´ì˜ ì‚¬ìš© ì˜ˆì œ 1) ë¬´ê¸° ë³€ê²½

<aside>
ğŸ’¡

ì ì˜ íŠ¹ì„±ì— ë”°ë¼ ì£¼ì¸ê³µì´ ë¬´ê¸° ì „ëµì„ ë°”ê¿”ê°€ë©° ëŒ€ì‘í•˜ëŠ” ìƒí™©

</aside>

<br/>

### ì „ëµ íŒ¨í„´ ì ìš© ì „

stateÂ ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì— ë”°ë¼ì„œ ê°„ì ‘ì ìœ¼ë¡œÂ attack()Â í•¨ìˆ˜ì˜ ë™ì‘ì„ ì œì–´í•˜ë„ë¡ ë˜ì–´ ìˆë‹¤. ì ì´ ì˜¤ë©´ ìƒìˆ˜ë¥¼ ë©”ì†Œë“œì— ë„˜ê²¨ ì¡°ê±´ë¬¸ìœ¼ë¡œ ì¼ì¼íˆ í•„í„°ë§í•˜ì—¬ ì ì ˆí•œ ì „ëµì„ ì‹¤í–‰

```java
class TakeWeapon {
    public static final int SWORD = 0;
    public static final int SHIELD = 1;
    public static final int CROSSBOW = 2;

    private int state;

    void setWeapon(int state) {
        this.state = state;
    }

    void attack() {
        if (state == SWORD) {
            System.out.println("ì¹¼ì„ íœ˜ë‘ë¥´ë‹¤");
        } else if (state == SHIELD) {
            System.out.println("ë°©íŒ¨ë¡œ ë°€ì¹œë‹¤");
        } else if (state == CROSSBOW) {
            System.out.println("ì„ê¶ì„ ë°œì‚¬í•˜ë‹¤");
        }
    }
}
```

```java
class User {
    public static void main(String[] args) {
        // í”Œë ˆì´ì–´ ì†ì— ë¬´ê¸° ì°©ìš© ì „ëµì„ ì„¤ì •
        TakeWeapon hand = new TakeWeapon();

        // í”Œë ˆì´ì–´ê°€ ê²€ì„ ë“¤ë„ë¡ ì „ëµ ì„¤ì •
        hand.setWeapon(TakeWeapon.SWORD);
        hand.attack(); // "ì¹¼ì„ íœ˜ë‘ë¥´ë‹¤"

        // í”Œë ˆì´ì–´ê°€ ë°©íŒ¨ë¥¼ ë“¤ë„ë¡ ì „ëµ ì„¤ì •
        hand.setWeapon(TakeWeapon.SHIELD);
        hand.attack(); // "ë°©íŒ¨ë¡œ ë°€ì¹œë‹¤"
    }
}

```

<br/>

### ì „ëµ íŒ¨í„´ ì ìš©

ìœ„ì˜ í´ë¦°í•˜ì§€ ì•Šì€ ì½”ë“œë¥¼ í•´ê²°í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ë³€ê²½ì‹œí‚¤ê³ ì í•˜ëŠ” í–‰ìœ„(ì „ëµ)ë¥¼ ì§ì ‘ ë„˜ê²¨ì£¼ëŠ” ê²ƒì´ë‹¤.

ìš°ì„  ì—¬ëŸ¬ ë¬´ê¸°ë“¤ì„ ê°ì²´ êµ¬í˜„ì²´ë¡œ ì •ì˜í•˜ê³  ì´ë“¤ì„ Weaponì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ ë¬¶ì–´ ì£¼ì—ˆë‹¤. ê·¸ë¦¬ê³  ì¸í„°í˜ì´ìŠ¤ë¥¼ ì»¨í…ìŠ¤íŠ¸ í´ë˜ìŠ¤ì— í•©ì„±(composition) ì‹œí‚¤ê³ ,Â ~~setWeapon()~~Â ë©”ì†Œë“œë¥¼ í†µí•´ ì „ëµ ì¸í„°í˜ì´ìŠ¤ ê°ì²´ì˜ ìƒíƒœë¥¼ ë°”ë¡œë°”ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„± í•˜ì˜€ë‹¤.

```java
// ì „ëµ - ì¶”ìƒí™”ëœ ì•Œê³ ë¦¬ì¦˜
interface Weapon {
    void offensive();
}

class Sword implements Weapon {
    @Override
    public void offensive() {
        System.out.println("ì¹¼ì„ íœ˜ë‘ë¥´ë‹¤");
    }
}

class Shield implements Weapon {
    @Override
    public void offensive() {
        System.out.println("ë°©íŒ¨ë¡œ ë°€ì¹œë‹¤");
    }
}

class CrossBow implements Weapon {
    @Override
    public void offensive() {
        System.out.println("ì„ê¶ì„ ë°œì‚¬í•˜ë‹¤");
    }
}
```

```java
// ì»¨í…ìŠ¤íŠ¸ - ì „ëµì„ ë“±ë¡í•˜ê³  ì‹¤í–‰
class TakeWeaponStrategy {
    Weapon wp;

    void setWeapon(Weapon wp) {
        this.wp = wp;
    }

    void attack() {
        wp.offensive();
    }
}
```

```java
// í´ë¼ì´ì–¸íŠ¸ - ì „ëµ ì œê³µ/ì„¤ì •
class User {
    public static void main(String[] args) {
        // í”Œë ˆì´ì–´ ì†ì— ë¬´ê¸° ì°©ìš© ì „ëµì„ ì„¤ì •
        TakeWeaponStrategy hand = new TakeWeaponStrategy();

        // í”Œë ˆì´ì–´ê°€ ê²€ì„ ë“¤ë„ë¡ ì „ëµ ì„¤ì •
        hand.setWeapon(new Sword());
        hand.attack(); // "ì¹¼ì„ íœ˜ë‘ë¥´ë‹¤"

        // í”Œë ˆì´ì–´ê°€ ë°©íŒ¨ë¥¼ ë“¤ë„ë¡ ì „ëµ ë³€ê²½
        hand.setWeapon(new Shield());
        hand.attack(); // "ë°©íŒ¨ë¡œ ë°€ì¹œë‹¤"
        
        // í”Œë ˆì´ì–´ê°€ ì„ê¶ì„ ë“¤ë„ë¡ ì „ëµ ë³€ê²½
        hand.setWeapon(new Crossbow());
        hand.attack(); // "ì„ê¶ì„ ë°œì‚¬í•˜ë‹¤"
    }
}
```

## ì „ëµ íŒ¨í„´ ì‚¬ìš© ì˜ˆì œ 2) ì¹´ë“œ ê²°ì œ

<aside>
ğŸ’¡

ì‡¼í•‘ ì¹´íŠ¸ì— ì•„ì´í…œì„ ë‹´ì•„ LUNA ì‹ ìš©ì¹´ë“œ ë˜ëŠ” KAKAO ì‹ ìš©ì¹´ë“œë¼ëŠ” ë‘ ê°œì˜ ì „ëµì„ ì´ìš©í•´ ìƒí™©ì— ë”°ë¼ ê²°ì œ

</aside>

```java
// ì „ëµ - ì¶”ìƒí™”ëœ ì•Œê³ ë¦¬ì¦˜
interface PaymentStrategy {
    void pay(int amount);
}

class KAKAOCardStrategy implements PaymentStrategy {
    private String name;
    private String cardNumber;
    private String cvv;
    private String dateOfExpiry;

    public KAKAOCardStrategy(String nm, String ccNum, String cvv, String expiryDate) {
        this.name = nm;
        this.cardNumber = ccNum;
        this.cvv = cvv;
        this.dateOfExpiry = expiryDate;
    }

    @Override
    public void pay(int amount) {
        System.out.println(amount + "ì› paid using KAKAOCard.");
    }
}

class LUNACardStrategy implements PaymentStrategy {
    private String emailId;
    private String password;

    public LUNACardStrategy(String email, String pwd) {
        this.emailId = email;
        this.password = pwd;
    }

    @Override
    public void pay(int amount) {
        System.out.println(amount + "ì› paid using LUNACard.");
    }
}
```

```java
// ì»¨í…ìŠ¤íŠ¸ - ì „ëµì„ ë“±ë¡í•˜ê³  ì‹¤í–‰
class ShoppingCart {
    List<Item> items;

    public ShoppingCart() {
        this.items = new ArrayList<Item>();
    }

    public void addItem(Item item) {
        this.items.add(item);
    }
	
    // ì „ëµì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ ë°”ë¡œë°”ë¡œ ì „ëµì„ ì‹¤í–‰
    public void pay(PaymentStrategy paymentMethod) {
        int amount = 0;
        for (Item item : items) {
            amount += item.price;
        }
        paymentMethod.pay(amount);
    }
}
```

```java
class Item {
    public String name;
    public int price;

    public Item(String name, int cost) {
        this.name = name;
        this.price = cost;
    }
}

// í´ë¼ì´ì–¸íŠ¸ - ì „ëµ ì œê³µ/ì„¤ì •
class User {
    public static void main(String[] args) {
        // ì‡¼í•‘ì¹´íŠ¸ ì „ëµ ì»¨í…ìŠ¤íŠ¸ ë“±ë¡
        ShoppingCart cart = new ShoppingCart();

        // ì‡¼í•‘ ë¬¼í’ˆ
        Item A = new Item("ë§¥ë¶ í”„ë¡œ", 10000);
        Item B = new Item("í”Œë ˆì´ìŠ¤í…Œì´ì…˜", 30000);
        cart.addItem(A);
        cart.addItem(B);

        // LUNACardë¡œ ê²°ì œ ì „ëµ ì‹¤í–‰
        cart.pay(new LUNACardStrategy("kundol@example.com", "pukubababo")); // 4000ì› paid using LUNACard.

        // KAKAOBankë¡œ ê²°ì œ ì „ëµ ì‹¤í–‰
        cart.pay(new KAKAOCardStrategy("Ju hongchul", "123456789", "123", "12/01")); // 4000ì› paid using KAKAOCard.
    }
}
```

<br/>

# ì°¸ê³ 

https://inpa.tistory.com/entry/GOF-ğŸ’ -ì „ëµStrategy-íŒ¨í„´-ì œëŒ€ë¡œ-ë°°ì›Œë³´ì
